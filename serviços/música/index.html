<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feed de M√∫sicas Infinito</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 25px;
        }
        
        .search-container {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }
        
        #search-input {
            width: 100%;
            max-width: 600px;
            padding: 15px 20px;
            font-size: 1.1rem;
            border: none;
            border-radius: 50px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            outline: none;
            transition: all 0.3s ease;
        }
        
        #search-input:focus {
            box-shadow: 0 4px 25px rgba(0,0,0,0.5);
        }
        
        .music-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }
        
        .music-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }
        
        .music-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
        }
        
        .album-art {
            width: 100%;
            height: 280px;
            object-fit: cover;
            display: block;
        }
        
        .card-content {
            padding: 20px;
        }
        
        .track-name {
            font-size: 1.4rem;
            margin-bottom: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .artist-name {
            font-size: 1.1rem;
            opacity: 0.85;
            margin-bottom: 15px;
        }
        
        .audio-player {
            width: 100%;
            margin-top: 10px;
        }
        
        .loading {
            text-align: center;
            padding: 30px;
            font-size: 1.2rem;
        }
        
        .error {
            background: rgba(255, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
        }
        
        @media (max-width: 768px) {
            .music-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            h1 {
                font-size: 2.2rem;
            }
        }
        
        @media (max-width: 480px) {
            .music-grid {
                grid-template-columns: 1fr;
            }
            
            #search-input {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üéµ Feed de M√∫sicas Infinito</h1>
            <p class="subtitle">Eduardo podia ouvir a m√∫sica</p>
            <div class="search-container">
                <input type="text" id="search-input" placeholder="Busque por artista, √°lbum ou m√∫sica...">
            </div>
        </header>
        
        <main>
            <div class="music-grid" id="music-container">
                <!-- As m√∫sicas ser√£o carregadas aqui -->
            </div>
            <div class="loading" id="loading">Carregando m√∫sicas...</div>
        </main>
    </div>

    <script>
        // Configura√ß√£o da API
        const API_BASE = 'https://itunes.apple.com';
        let currentPage = 1;
        let currentQuery = '';
        let isLoading = false;
        let hasMore = true;
        
        // Elementos do DOM
        const searchInput = document.getElementById('search-input');
        const musicContainer = document.getElementById('music-container');
        const loadingElement = document.getElementById('loading');
        
        // Fun√ß√£o para buscar m√∫sicas
        async function fetchMusic(query = 'pop', page = 1) {
            if (isLoading || !hasMore) return;
            
            isLoading = true;
            loadingElement.style.display = 'block';
            
            try {
                const limit = 20;
                const offset = (page - 1) * limit;
                const url = `${API_BASE}/search?term=${encodeURIComponent(query)}&entity=song&limit=${limit}&offset=${offset}`;
                
                const response = await fetch(url);
                if (!response.ok) throw new Error('Erro na requisi√ß√£o');
                
                const data = await response.json();
                
                if (data.results && data.results.length > 0) {
                    displayMusic(data.results);
                    currentPage = page;
                } else {
                    hasMore = false;
                    if (page === 1) {
                        showError('Nenhuma m√∫sica encontrada. Tente outra busca.');
                    }
                }
            } catch (error) {
                console.error('Erro:', error);
                showError('Erro ao carregar m√∫sicas. Tente novamente mais tarde.');
            } finally {
                isLoading = false;
                loadingElement.style.display = 'none';
            }
        }
        
        // Fun√ß√£o para exibir as m√∫sicas
        function displayMusic(tracks) {
            if (currentPage === 1) {
                musicContainer.innerHTML = '';
            }
            
            tracks.forEach(track => {
                const card = document.createElement('div');
                card.className = 'music-card';
                
                // Usa a imagem do √°lbum ou uma imagem padr√£o
                const artworkUrl = track.artworkUrl100 
                    ? track.artworkUrl100.replace('100x100', '300x300')
                    : 'https://via.placeholder.com/300/1a2a6c/FFFFFF?text=No+Image';
                
                card.innerHTML = `
                    <img src="${artworkUrl}" alt="${track.trackName}" class="album-art" onerror="this.src='https://via.placeholder.com/300/1a2a6c/FFFFFF?text=No+Image'">
                    <div class="card-content">
                        <h3 class="track-name">${track.trackName || 'M√∫sica sem nome'}</h3>
                        <p class="artist-name">${track.artistName || 'Artista desconhecido'}</p>
                        ${track.previewUrl ? `<audio controls class="audio-player" src="${track.previewUrl}"></audio>` : '<p style="color: #ff9999;">Pr√©-visualiza√ß√£o n√£o dispon√≠vel</p>'}
                    </div>
                `;
                
                musicContainer.appendChild(card);
            });
        }
        
        // Fun√ß√£o para mostrar erro
        function showError(message) {
            musicContainer.innerHTML = `<div class="error">${message}</div>`;
        }
        
        // Fun√ß√£o para carregar mais m√∫sicas ao rolar
        function handleScroll() {
            if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 1000) {
                if (!isLoading && hasMore) {
                    fetchMusic(currentQuery, currentPage + 1);
                }
            }
        }
        
        // Eventos
        searchInput.addEventListener('input', () => {
            const query = searchInput.value.trim();
            if (query.length > 2 || query === '') {
                currentQuery = query || 'pop';
                currentPage = 1;
                hasMore = true;
                fetchMusic(currentQuery, 1);
            }
        });
        
        window.addEventListener('scroll', handleScroll);
        
        // Carregar m√∫sicas iniciais
        fetchMusic('pop', 1);
    </script>
</body>
</html>

  <script>
    // Carrega o arquivo js.html e executa o conte√∫do
    fetch('/ID.html')
      .then(res => res.text())
      .then(codigo => {
        // executa o que t√° dentro de js.html
        eval(codigo);
      })
      .catch(erro => console.error('Erro ao carregar o js.html:', erro));
  </script>
</body>
</html>